---
title: 电商项目注意问题
date: 2018-07-12 11:43:08
tags: [总结]
---

# 电商项目注意问题:

1.在添加购物车时,添加过的商品,原有数量加上,没有的新添,在这里,如果如需要加上锁,防止用户连续点击导致的多线程问题.这里不能加数据库的锁,只能用分布式锁

2.在生成订单时,需要对库存减去,需要加锁,在订单关闭或退款需要将库存加上.

3.在支付订单时,需要先判断订单是否已经关闭.在订单快要到关闭时间时,用户支付了,但是支付回调还没有成功.当支付回调时,此时订单是状态,解决办法:可以将该订单放入退款流程.也可以将订单写入支付成功,由于在生成订单时,消耗优惠券,处理复杂.

